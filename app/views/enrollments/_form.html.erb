
<% if not @enrollment.nil? %>
    <%= form_for(@enrollment) do |f| %>
        <% if @enrollment.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@enrollment.errors.count, "error") %> prohibited this enrollment from being saved:</h2>

              <ul>
                <% @enrollment.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                <% end %>
              </ul>
            </div>
        <% end %>
        <table class="formtable">
          <tr>
            <td class="label"><%= f.label :firstname, 'Etunimi' %></td>
            <td class="field"><%= f.text_field :firstname %></td>
          </tr>
          <tr>
            <td class="label"><%= f.label :lastname, 'Sukunimi'%></td>
            <td class="field"><%= f.text_field :lastname %></td>
          </tr>
          <tr>
            <td class="label"><%= f.label :studentnumber, 'Opiskelijanumero' %></td>
            <td class="field"><%= f.text_field :studentnumber %></td>
          </tr>
          <tr>
            <td class="label"><%= f.label :email, 'Sähköpostiosoite' %></td>
            <td class="field"><%= f.text_field :email %></td>
          </tr>
        </table>

        <table class="formtable">
          <%= f.fields_for :signups do |sf| %>
              <tr>
                <td class="label">Prioriteetti <%= sf.object.priority %>:</td>
                <td class="field"><%= sf.select :project_id, options_from_collection_for_select(@projects, :id, :name, sf.object.project_id), :include_blank => '---- Valitse ----' %></td>
              </tr>

              <%= sf.hidden_field :id, value:sf.object.id %>
              <%= sf.hidden_field :priority, value:"#{sf.object.priority}" %>

          <% end %>
        </table>
        <br>
        <br/>
        <div class="actions">
          <%= f.submit 'Tallenna ilmoittautuminen'%>
        </div>
    <% end %>

<% end %>
